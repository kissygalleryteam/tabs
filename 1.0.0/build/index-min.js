KISSY.add("kg/tabs/1.0.0/index",["base","ua","uri","kg/datalazyload/2.0.2/","node"],function(e,t,n,a){var i,r=t("base"),o=t("ua"),l=t("uri"),s=t("kg/datalazyload/2.0.2/"),c=t("node");i=function(t){var n,a=c.all,i=r,d=o,g=l,f=s,u=i.extend({initializer:function(){var e=this,t=e.get("$target");t.length&&t.addClass("kg-tabs")},render:function(){var t=this,n=t.get("$target");return n.length?(t._bind(),t._handleHash(),t):void e.log("节点"+n+"不存在！")},"goto":function(e){e=1*e;var t=this,a=t.get("$target"),i=a.one(".tabs-nav").all("li"),r=a.one(".tabs-content"),o=r.all(".tabs-pannel"),l=0>e?t.get("_index")+e:e,s=i.item(l),c=t.fire("switch:before",{node:s,panel:o,index:l});if(c!==!1){var d=t._getConfig("effect"),g=t._getConfig("effectSpeed")/1e3,u=t._getConfig("exec"),v=o.item(l),h=i.item(l);if(v&&h){h.addClass("selected").siblings().removeClass("selected");var b=function(){t.fire("switch:after",{node:s,panel:o,index:l})};switch(d){case"fade":v.fadeIn(g,b).siblings().hide();break;case"slide":v.slideDown(g,b).siblings().hide();break;default:v.removeClass("hidden").siblings().addClass("hidden"),b()}n=new f({container:v,execScript:u}),t.set("_index",l)}return t}},_bind:function(){var t,n=this,i=n.get("$target"),r=n._getConfig("event"),o=n._getConfig("delay"),l=i.one(".tabs-nav").all("li");switch(d.mobile&&(r="tap"),r){case"hover":l.on("mouseenter",function(a){a.halt(),t=e.later(function(){n._handleEvent(a.currentTarget)},o)}).on("mouseleave",function(e){e.halt(),t&&t.cancel&&t.cancel()});break;case"click":case"tap":default:l.on(r,function(t){t.halt(),e.later(function(){n._handleEvent(t.currentTarget)},o)})}a(window).on("hashchange",function(){n._handleHash()})},_handleHash:function(){var e=this,t=e.get("$target"),n=e._getConfig("scrollOffset"),i=new g(window.location.href).getFragment(),r=i.split("@",2);r.length<2||t.attr("id")===r[0]&&/\d+/.test(r[1])&&(e["goto"](1*r[1]),a(window).scrollTop(t.offset().top-n))},_handleEvent:function(t){var i=this,r=a(t);if(!r.hasClass("selected")){var o=i.get("$target"),l=o.one(".tabs-nav").all("li"),s=e.indexOf(t,l.getDOMNodes());n&&n.destroy(),i["goto"](s)}},_getConfig:function(e){var t=this,n=t.get("$target");return n.attr("data-"+e)?n.attr("data-"+e):t.get(e)}},{ATTRS:{$target:{value:"",getter:function(e){return a(e)}},event:{value:"click",getter:function(t){var n=["click","hover"];return e.inArray(t,n)?t:"click"}},effect:{value:"none",getter:function(t){var n=["none","fade","slide"];return e.inArray(t,n)?t:"none"}},effectSpeed:{value:500,getter:function(e){return parseInt(e)||500}},delay:{valueFn:function(){var e=this,t=e.get("$target"),n=0;return("hover"===e.get("event")||"hover"===t.attr("data-event"))&&(n=200),n},getter:function(e){return+e}},exec:{value:!0,getter:function(e){return!!e}},scrollOffset:{value:0,getter:function(e){return+e}},_index:{value:0}}});return t=u}(),a.exports=i});